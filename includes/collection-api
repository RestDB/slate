<h1 id='data-collection-api'>Data Collection API</h1>
<p>The <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">Restful</a> API automatically reflects your database schema. All restdb.io databases have a unique URL as a REST endpoint.Â Client applications communicate through the URL with JSON objects. A database collection (same as a SQL table) contains your JSON documents. </p>
<h2 id='fetch-a-data-list-from-a-collection'>Fetch a data list from a collection</h2>
<blockquote>
<p>Example code to GET data list from a collection:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -g -X GET <span class="se">\</span>
  <span class="s1">'https://sports-xf03.restdb.io/rest/companies?q={"status":"professional"}&amp;sort=score&amp;max=10'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  -H <span class="s1">'x-apikey: 73bf145c901d1feecf80c26a9d0d1a64aa145'</span>
</code></pre>
<blockquote>
<p>Example output:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"professional"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joey"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"professional"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>HTTP REQUEST</strong></p>

<p><code>GET https://{mydatabase}.restdb.io/rest/{collection}[?params]</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>{mydatabase}</code> <small>mandatory</small></td>
<td>Your unique database name, e.g. <code>sports-xf03</code></td>
</tr>
<tr>
<td><code>{collection}</code> <small>mandatory</small></td>
<td>A unique collection name in your database, e.g. <code>players</code></td>
</tr>
<tr>
<td><code>[params]</code> <small>optional</small></td>
<td>See query <a href="#optional-query-parameters">parameters</a> listed below</td>
</tr>
</tbody></table>
<h3 id='optional-query-parameters'>Optional query parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>q</td>
<td><code>{}</code></td>
<td>Database Query. JSON format</td>
</tr>
<tr>
<td>h</td>
<td><code>{}</code></td>
<td><a href="#query-hints">Query hints</a> for Query and output. JSON format</td>
</tr>
<tr>
<td>filter</td>
<td>none</td>
<td>Free text search filter</td>
</tr>
<tr>
<td>sort</td>
<td><code>_id</code></td>
<td>Field to sort query result on</td>
</tr>
<tr>
<td>dir</td>
<td><code>-1</code></td>
<td>Sort direction, -1 = ascending, 1 = descending</td>
</tr>
<tr>
<td>skip</td>
<td><code>0</code></td>
<td>Skip forward in result data set</td>
</tr>
<tr>
<td>max</td>
<td><code>1000</code></td>
<td>Data result page size</td>
</tr>
<tr>
<td>metafields</td>
<td>none</td>
<td>Add system fields in data result. See <a href="#meta-fields">meta fields</a></td>
</tr>
<tr>
<td>totals</td>
<td>none</td>
<td>Return data and paging meta data. See <a href="#data-result-paging">data result paging</a></td>
</tr>
<tr>
<td>groupby</td>
<td>none</td>
<td>Group data by field</td>
</tr>
<tr>
<td>aggregate</td>
<td>none</td>
<td>Aggregate data by field</td>
</tr>
<tr>
<td>apikey</td>
<td>none</td>
<td>Add an apikey in as request parameter instead of as a header value (not recommended)</td>
</tr>
<tr>
<td>idtolink</td>
<td>none</td>
<td>URLs for links and images</td>
</tr>
<tr>
<td>flatten</td>
<td>none</td>
<td>Place deep properies on root object</td>
</tr>
<tr>
<td>referencedby</td>
<td>none</td>
<td>refs</td>
</tr>
<tr>
<td>fetchmediadata</td>
<td>none</td>
<td>media</td>
</tr>
<tr>
<td>fetchchildren</td>
<td>none</td>
<td>child data</td>
</tr>
<tr>
<td>format</td>
<td>none</td>
<td>.js or .html</td>
</tr>
</tbody></table>
<h3 id='query-hints'>Query hints</h3>
<p>You can add a hint to any query.</p>
<pre class="highlight shell tab-shell"><code>curl -g -X GET <span class="se">\</span>
  <span class="s1">'https://{mydatabase}.restdb.io/rest/people?q={"name":"jane"}&amp;h={"$max":20}'</span> <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'cache-control: no-cache'</span> <span class="se">\</span>
  -H <span class="s1">'x-apikey: {MY_API_KEY_HERE}'</span>
</code></pre>
<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Hint</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>$fields</code></td>
<td>Show or hide fields in the output data result set. E.g. <code>h={&quot;$fields&quot;:{&quot;title&quot;:1, &quot;age&quot;: 0}</code>. Mixing values 0 and 1 are not allowed</td>
</tr>
<tr>
<td><code>$max</code></td>
<td>Max records returnes by query. E.g. <code>h={&quot;$max&quot;: 20}</code></td>
</tr>
<tr>
<td><code>$skip</code></td>
<td>Skip records. E.g. <code>h={&quot;$skip&quot;: 100}</code></td>
</tr>
<tr>
<td><code>$orderby</code></td>
<td>Sort by field(s). E.g. <code>h={&quot;$orderby&quot;: {&quot;salary&quot;: 1, &quot;age&quot;: -1}</code></td>
</tr>
<tr>
<td><code>$groupby</code></td>
<td>Group data by field(s). E.g. <code>h={&quot;$groupby&quot;:[&quot;age&quot;, &quot;position&quot;}</code>. See <a href="#aggregation">aggregation</a></td>
</tr>
<tr>
<td><code>$aggregate</code></td>
<td>Aggregate data by expression(s). <code>h={&quot;$aggregate&quot;:[&quot;SUM:score&quot;]}</code>. See <a href="#aggregation">aggregation</a></td>
</tr>
</tbody></table>
<h3 id='meta-fields'>Meta fields</h3>
<blockquote>
<p>Example output data with metafields:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5631d356f941f47900000110"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nullam Suscipit Est Limited"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"P.O. Box 460, 4937 Non, Street"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"La Magdeleine"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AX6 7KK"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"_keywords"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"nullam"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"suscipit"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"est"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"limited"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"p"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"o"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"box"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"460"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"4937"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"non"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"street"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"la"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"magdeleine"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ax6"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"7kk"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"_tags"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nullam suscipit est limited p o box 460 4937 non street la magdeleine ax6 7kk"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-10-29T08:05:41.947Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"_createdby"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jones@restdb.io"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>The example query URL below show how metafields are return with the user data.</p>

<p><code>GET https://sports-xf03.restdb.io/rest/companies?&amp;metafields=true</code></p>

<table><thead>
<tr>
<th>Metafield</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>_id</code></td>
<td>Unique document ID</td>
</tr>
<tr>
<td><code>_keywords</code></td>
<td>Array of unique words from the JSON document</td>
</tr>
<tr>
<td><code>_tags</code></td>
<td>Text string of unique words from the JSON document</td>
</tr>
<tr>
<td><code>_version</code></td>
<td>Number inncremented of each update</td>
</tr>
<tr>
<td><code>_created</code></td>
<td>ISO Date string from the document creation time</td>
</tr>
<tr>
<td><code>_createdby</code></td>
<td>Username (email) for the authenticated user that created the document</td>
</tr>
<tr>
<td><code>_changed</code></td>
<td>ISO Date string from the document update time</td>
</tr>
<tr>
<td><code>_changedby</code></td>
<td>Email/username for the authenticated user that changed the document</td>
</tr>
</tbody></table>
<h2 id='fetch-a-data-item-from-a-collection'>Fetch a data item from a collection</h2>
<p>Get a data item by the unique document <code>_id</code> from a collection.</p>

<p><strong>HTTP REQUEST</strong></p>

<blockquote>
<p>Example code to GET a data item:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET <span class="se">\</span>
  https://sports-xf03.restdb.io/rest/companies/570e052d98290e490000006e <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'cache-control: no-cache,no-cache'</span> <span class="se">\</span>
  -H <span class="s1">'x-apikey: 73bf145c901d1feecf80c26a9d0d1a64aa145'</span>
</code></pre>
<blockquote>
<p>Example output:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"amateur"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code>GET https://{mydatabase}.restdb.io/rest/{collection}/{ID}</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>{mydatabase}</code> <small>mandatory</small></td>
<td>Your unique database name, e.g. <code>sports-xf03</code></td>
</tr>
<tr>
<td><code>{collection}</code> <small>mandatory</small></td>
<td>A unique collection name in your database, e.g. <code>players</code></td>
</tr>
<tr>
<td><code>{ID}</code> <small>mandatory</small></td>
<td>A unique document ID, e.g. <code>570e052d98290e490000006e</code></td>
</tr>
</tbody></table>
<h2 id='update-a-data-item-in-a-collection'>Update a data item in a collection</h2>
<p>Update a data item by the unique document <code>_id</code> in a collection.</p>

<p><strong>HTTP REQUEST</strong></p>

<p><code>PUT https://{mydatabase}.restdb.io/rest/{collection}/{ID}</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>{mydatabase}</code> <small>mandatory</small></td>
<td>Your unique database name, e.g. <code>sports-xf03</code></td>
</tr>
<tr>
<td><code>{collection}</code> <small>mandatory</small></td>
<td>A unique collection name in your database, e.g. <code>players</code></td>
</tr>
<tr>
<td><code>{ID}</code> <small>mandatory</small></td>
<td>A unique document ID, e.g. <code>570e052d98290e490000006e</code></td>
</tr>
<tr>
<td><code>body</code> <small>mandatory</small></td>
<td>Request body, a valid JSON document with properties to update</td>
</tr>
</tbody></table>
<h3 id='data-result-paging'>Data result paging</h3>
<blockquote>
<p>Data result paging output example below:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5631d356f941f479000000ea"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fames Institute"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8557 Elit, Rd."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goslar"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Z2 8KA"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5631d356f941f47900000109"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Urna LLP"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"P.O. Box 108, 7946 Erat Avenue"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morpeth"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"K1Z 2TI"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"totals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">102</span><span class="p">,</span><span class="w">
        </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"skip"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"max"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use the totals query parameter to retrieve data about totals, page size and page skipping.</p>

<p>The example query URL below shows an example:</p>

<p><code>GET https://sports-xf03.restdb.io/rest/companies?totals=true&amp;skip=10&amp;max=2</code></p>
<h3 id='header-values'>Header values</h3>
<p>bal bla</p>
<h2 id='query-language'>Query language</h2>
<p>bla bla</p>
<h3 id='logic'>Logic</h3>
<p>bla bla</p>
<h3 id='aggregation'>Aggregation</h3>
<p>bla bla</p>
<h2 id='add-a-new-data-item-to-a-collection'>Add a new data item to a collection</h2>
<blockquote>
<p>Example code to POST a data item:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST <span class="se">\</span>
  https://sports-xf03.restdb.io/rest/companies/570e052d98290e490000006e <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'cache-control: no-cache,no-cache'</span> <span class="se">\</span>
  -H <span class="s1">'x-apikey: 73bf145c901d1feecf80c26a9d0d1a64aa145'</span>
</code></pre><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">func</span><span class="p">():</span>
  <span class="k">return</span>
</code></pre>
<blockquote>
<p>Example output:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xx"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xx"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>POST a new data item by the to a collection.</p>

<p><strong>HTTP REQUEST</strong></p>

<p><code>POST https://sports-xf03.restdb.io/rest/companies</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>{mydatabase}</code> <small>mandatory</small></td>
<td>Your unique database name, e.g. <code>sports-xf03</code></td>
</tr>
<tr>
<td><code>{collection}</code> <small>mandatory</small></td>
<td>A unique collection name in your database, e.g. <code>players</code></td>
</tr>
<tr>
<td><code>{ID}</code> <small>mandatory</small></td>
<td>A unique document ID, e.g. <code>570e052d98290e490000006e</code></td>
</tr>
<tr>
<td><code>body</code> <small>mandatory</small></td>
<td>Request body, a valid JSON document with properties to update</td>
</tr>
</tbody></table>
<h3 id='data-payload'>Data payload</h3>
<p>bla bla</p>
<h3 id='using-post-to-emulate-put-delete-patch'>Using POST to emulate PUT, DELETE, PATCH</h3>
<p>If your development platform or firewall rules prevent you from calling HTTP methods like PUT, PATCH or DELETE, use the <code>X-HTTP-Method-Override</code> header. Pass the method you want to use in the X-HTTP-Method-Override header and make your call using the POST method.</p>
